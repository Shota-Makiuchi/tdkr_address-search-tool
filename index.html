<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>宛名登録先 判断ツール</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', 'Inter', sans-serif;
        }
        .card {
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            transition: all 0.3s ease-in-out;
        }
        .btn {
            transition: all 0.2s ease-in-out;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgb(0 0 0 / 0.2);
        }
        .result-card {
             animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="card bg-white rounded-2xl p-6 md:p-8 w-full max-w-2xl mx-auto">
        <h1 class="text-2xl md:text-3xl font-bold text-center text-gray-800 mb-6">宛名登録先 判断ツール</h1>

        <!-- Question Area -->
        <div id="question-container">
            <div id="question-card" class="bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg mb-6">
                <h2 id="question-title" class="text-xl md:text-2xl font-bold text-gray-900 mb-3"></h2>
                <p id="question-description" class="text-gray-700 text-base"></p>
            </div>
            <div id="button-container" class="flex flex-col sm:flex-row gap-4 justify-center">
                <button id="yes-button" class="btn bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg text-lg w-full sm:w-auto">はい (YES)</button>
                <button id="no-button" class="btn bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-lg text-lg w-full sm:w-auto">いいえ (NO)</button>
            </div>
        </div>

        <!-- Result Area -->
        <div id="result-container" class="hidden text-center">
            <div id="result-card" class="result-card bg-indigo-600 text-white p-8 rounded-xl mb-6">
                <h2 class="text-lg font-medium mb-2">【結論】</h2>
                <p id="result-text" class="text-3xl font-bold"></p>
            </div>
            <button id="restart-button" class="btn bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg text-lg">最初からやり直す</button>
        </div>
    </div>

    <script>
        const flowchartData = {
            // 個人アカウントの特定フロー
            'B': {
                title: "郵便物に名前あり？",
                description: "宛名に個人名（フルネームまたは苗字）が含まれているかを確認してください。",
                yes: 'C',
                no: 'E'
            },
            'C': {
                title: "フルネーム記載あり？",
                description: "「山田 太郎」のように、姓名の両方が記載されている場合が対象です。苗字のみの場合は「いいえ」を選択してください。",
                yes: 'D',
                no: 'E'
            },
            'D': {
                title: "姓名が完全一致？",
                description: "システムの登録情報と、郵便物の姓名が完全に一致するものを探してください。",
                yes: 'F',
                no: 'G'
            },
            'E': {
                title: "アドレス帳に姓が一致？",
                description: "郵便物の苗字と、システムに登録されている苗字が一致するアカウントを探してください。",
                yes: 'G',
                no: 'I'
            },
            'F': {
                title: "同姓同名なし？",
                description: "完全に一致したアカウントが、システム内に複数存在しないか確認してください。1件のみの場合は「はい」を選択してください。",
                yes: 'Z1',
                no: 'G'
            },
            'G': {
                title: "同姓なし？",
                description: "一致したアカウントが、システム内に複数存在しないか確認してください。1件のみの場合は「はい」を選択してください。",
                yes: 'Z1',
                no: 'H'
            },
            'H': {
                title: "部署一致が1件のみ？",
                description: "郵便物に部署名が記載されている場合、その部署と一致するアカウントが1件だけか確認してください。",
                yes: 'Z1',
                no: 'I'
            },
            // グループアカウントの特定フロー
            'I': {
                title: "部署名グループを検索",
                description: "ここからは、部署名での検索に移行します。下の「はい」ボタンを押して次に進んでください。（この質問は分岐しません）",
                yes: 'J',
                no: 'J' // NOボタンを押しても次に進む
            },
            'J': {
                title: "部署名グループあり？",
                description: "郵便物に記載されている部署名が、システムにグループとして登録されているか確認してください。",
                yes: 'K',
                no: 'M'
            },
            'K': {
                title: "部署名が完全一致？",
                description: "「営業部」と「営業第一部」は不一致です。完全に同じ名称のグループがあるか確認してください。",
                yes: 'Z2',
                no: 'L'
            },
            'L': {
                title: "部署名が部分一致？",
                description: "例えば宛名が「営業部」の時、「営業第一部」や「営業企画部」などが候補になります。候補が1つだけか確認してください。",
                yes: 'Z2',
                no: 'M'
            },
            'M': {
                title: "会社名グループあり？",
                description: "郵便物に記載されている会社名が、システムにグループとして登録されているか確認してください。",
                yes: 'N',
                no: 'Z4'
            },
            'N': {
                title: "会社名が完全一致？",
                description: "会社名が完全に一致するグループがあるか確認してください。",
                yes: 'Z3',
                no: 'Z4'
            },
            // 結論
            'Z1': { type: 'result', text: '個人アカウントに登録' },
            'Z2': { type: 'result', text: '部署名グループに登録' },
            'Z3': { type: 'result', text: '会社名グループに登録' },
            'Z4': { type: 'result', text: '宛名不明グループに登録' }
        };

        const questionContainer = document.getElementById('question-container');
        const resultContainer = document.getElementById('result-container');
        const questionTitle = document.getElementById('question-title');
        const questionDescription = document.getElementById('question-description');
        const resultText = document.getElementById('result-text');
        const yesButton = document.getElementById('yes-button');
        const noButton = document.getElementById('no-button');
        const restartButton = document.getElementById('restart-button');

        let currentNodeId = 'B'; // 開始ノードを'B'に直接設定

        function renderNode(nodeId) {
            const node = flowchartData[nodeId];

            if (node.type === 'result') {
                // 結果表示
                questionContainer.classList.add('hidden');
                resultContainer.classList.remove('hidden');
                resultText.textContent = node.text;
            } else {
                // 質問表示
                questionContainer.classList.remove('hidden');
                resultContainer.classList.add('hidden');
                questionTitle.textContent = node.title;
                questionDescription.textContent = node.description;
            }
        }

        function handleAnswer(answer) {
            const currentNode = flowchartData[currentNodeId];
            const nextNodeId = answer === 'yes' ? currentNode.yes : currentNode.no;
            
            if (nextNodeId) {
                currentNodeId = nextNodeId;
                renderNode(currentNodeId);
            }
        }
        
        yesButton.addEventListener('click', () => handleAnswer('yes'));
        noButton.addEventListener('click', () => handleAnswer('no'));
        restartButton.addEventListener('click', () => {
            currentNodeId = 'B'; // リスタートも'B'から
            renderNode(currentNodeId);
        });

        // 初期表示
        renderNode(currentNodeId);
    </script>
</body>
</html>
